import{r as s,j as F}from"./vendor-react-CZsnXDlc.js";import{c as R}from"./vendor--radix-ui-primitive-Dc_FVRD7.js";import{c as H}from"./vendor--radix-ui-react-collection-C4w12edl.js";import{u as Y}from"./vendor--radix-ui-react-compose-refs-CVrj7niN.js";import{u as V}from"./vendor--radix-ui-react-id-C0t13dQO.js";import{P as D}from"./vendor--radix-ui-react-primitive-_oVSknEO.js";import{u as z}from"./vendor--radix-ui-react-use-callback-ref-Dx3Q4U7H.js";import{u as q}from"./vendor--radix-ui-react-use-controllable-state-BzBLEYeI.js";import{u as J}from"./vendor--radix-ui-react-direction-CU6lZibL.js";function Q(e,o=[]){let r=[];function n(d,u){const f=s.createContext(u),a=r.length;r=[...r,u];function c(v){const{scope:I,children:g,...t}=v,p=I?.[e][a]||f,S=s.useMemo(()=>t,Object.values(t));return F.jsx(p.Provider,{value:S,children:g})}function C(v,I){const g=I?.[e][a]||f,t=s.useContext(g);if(t)return t;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${d}\``)}return c.displayName=d+"Provider",[c,C]}const l=()=>{const d=r.map(u=>s.createContext(u));return function(f){const a=f?.[e]||d;return s.useMemo(()=>({[`__scope${e}`]:{...f,[e]:a}}),[f,a])}};return l.scopeName=e,[n,W(l,...o)]}function W(...e){const o=e[0];if(e.length===1)return o;const r=()=>{const n=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(d){const u=n.reduce((f,{useScope:a,scopeName:c})=>{const v=a(d)[`__scope${c}`];return{...f,...v}},{});return s.useMemo(()=>({[`__scope${o.scopeName}`]:u}),[u])}};return r.scopeName=o.scopeName,r}var h="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},E="RovingFocusGroup",[P,G,Z]=H(E),[ee,ge]=Q(E,[Z]),[te,oe]=ee(E),N=s.forwardRef((e,o)=>F.jsx(P.Provider,{scope:e.__scopeRovingFocusGroup,children:F.jsx(P.Slot,{scope:e.__scopeRovingFocusGroup,children:F.jsx(re,{...e,ref:o})})}));N.displayName=E;var re=s.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:l=!1,dir:d,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:a,onEntryFocus:c,preventScrollOnEntryFocus:C=!1,...v}=e,I=s.useRef(null),g=Y(o,I),t=J(d),[p=null,S]=q({prop:u,defaultProp:f,onChange:a}),[m,b]=s.useState(!1),w=z(c),K=G(r),T=s.useRef(!1),[k,A]=s.useState(0);return s.useEffect(()=>{const i=I.current;if(i)return i.addEventListener(h,w),()=>i.removeEventListener(h,w)},[w]),F.jsx(te,{scope:r,orientation:n,dir:t,loop:l,currentTabStopId:p,onItemFocus:s.useCallback(i=>S(i),[S]),onItemShiftTab:s.useCallback(()=>b(!0),[]),onFocusableItemAdd:s.useCallback(()=>A(i=>i+1),[]),onFocusableItemRemove:s.useCallback(()=>A(i=>i-1),[]),children:F.jsx(D.div,{tabIndex:m||k===0?-1:0,"data-orientation":n,...v,ref:g,style:{outline:"none",...e.style},onMouseDown:R(e.onMouseDown,()=>{T.current=!0}),onFocus:R(e.onFocus,i=>{const L=!T.current;if(i.target===i.currentTarget&&L&&!m){const y=new CustomEvent(h,X);if(i.currentTarget.dispatchEvent(y),!y.defaultPrevented){const _=K().filter(x=>x.focusable),U=_.find(x=>x.active),B=_.find(x=>x.id===p),$=[U,B,..._].filter(Boolean).map(x=>x.ref.current);j($,C)}}T.current=!1}),onBlur:R(e.onBlur,()=>b(!1))})})}),O="RovingFocusGroupItem",M=s.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:l=!1,tabStopId:d,...u}=e,f=V(),a=d||f,c=oe(O,r),C=c.currentTabStopId===a,v=G(r),{onFocusableItemAdd:I,onFocusableItemRemove:g}=c;return s.useEffect(()=>{if(n)return I(),()=>g()},[n,I,g]),F.jsx(P.ItemSlot,{scope:r,id:a,focusable:n,active:l,children:F.jsx(D.span,{tabIndex:C?0:-1,"data-orientation":c.orientation,...u,ref:o,onMouseDown:R(e.onMouseDown,t=>{n?c.onItemFocus(a):t.preventDefault()}),onFocus:R(e.onFocus,()=>c.onItemFocus(a)),onKeyDown:R(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){c.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const p=ce(t,c.orientation,c.dir);if(p!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let m=v().filter(b=>b.focusable).map(b=>b.ref.current);if(p==="last")m.reverse();else if(p==="prev"||p==="next"){p==="prev"&&m.reverse();const b=m.indexOf(t.currentTarget);m=c.loop?ue(m,b+1):m.slice(b+1)}setTimeout(()=>j(m))}})})})});M.displayName=O;var ne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function se(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ce(e,o,r){const n=se(e.key,r);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ne[n]}function j(e,o=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:o}),document.activeElement!==r))return}function ue(e,o){return e.map((r,n)=>e[(o+n)%e.length])}var Fe=N,xe=M;export{xe as I,Fe as R,ge as c};
