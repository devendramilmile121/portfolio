import{r as S,j as I,e as C}from"./vendor-react-CZsnXDlc.js";import{u as N}from"./vendor--radix-ui-react-compose-refs-CVrj7niN.js";import{S as P}from"./vendor--radix-ui-react-slot-DBqzQTCO.js";function h(t,i=[]){let u=[];function R(r,o){const n=S.createContext(o),s=u.length;u=[...u,o];function d(a){const{scope:_,children:c,...e}=a,f=_?.[t][s]||n,l=S.useMemo(()=>e,Object.values(e));return I.jsx(f.Provider,{value:l,children:c})}function M(a,_){const c=_?.[t][s]||n,e=S.useContext(c);if(e)return e;if(o!==void 0)return o;throw new Error(`\`${a}\` must be used within \`${r}\``)}return d.displayName=r+"Provider",[d,M]}const p=()=>{const r=u.map(o=>S.createContext(o));return function(n){const s=n?.[t]||r;return S.useMemo(()=>({[`__scope${t}`]:{...n,[t]:s}}),[n,s])}};return p.scopeName=t,[R,O(p,...i)]}function O(...t){const i=t[0];if(t.length===1)return i;const u=()=>{const R=t.map(p=>({useScope:p(),scopeName:p.scopeName}));return function(r){const o=R.reduce((n,{useScope:s,scopeName:d})=>{const a=s(r)[`__scope${d}`];return{...n,...a}},{});return S.useMemo(()=>({[`__scope${i.scopeName}`]:o}),[o])}};return u.scopeName=i.scopeName,u}function y(t){const i=t+"CollectionProvider",[u,R]=h(i),[p,r]=u(i,{collectionRef:{current:null},itemMap:new Map}),o=c=>{const{scope:e,children:f}=c,l=C.useRef(null),m=C.useRef(new Map).current;return I.jsx(p,{scope:e,itemMap:m,collectionRef:l,children:f})};o.displayName=i;const n=t+"CollectionSlot",s=C.forwardRef((c,e)=>{const{scope:f,children:l}=c,m=r(n,f),x=N(e,m.collectionRef);return I.jsx(P,{ref:x,children:l})});s.displayName=n;const d=t+"CollectionItemSlot",M="data-radix-collection-item",a=C.forwardRef((c,e)=>{const{scope:f,children:l,...m}=c,x=C.useRef(null),E=N(e,x),v=r(d,f);return C.useEffect(()=>(v.itemMap.set(x,{ref:x,...m}),()=>void v.itemMap.delete(x))),I.jsx(P,{[M]:"",ref:E,children:l})});a.displayName=d;function _(c){const e=r(t+"CollectionConsumer",c);return C.useCallback(()=>{const l=e.collectionRef.current;if(!l)return[];const m=Array.from(l.querySelectorAll(`[${M}]`));return Array.from(e.itemMap.values()).sort((v,A)=>m.indexOf(v.ref.current)-m.indexOf(A.ref.current))},[e.collectionRef,e.itemMap])}return[{Provider:o,Slot:s,ItemSlot:a},_,R]}export{y as c};
