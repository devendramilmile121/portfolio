import{r as s,j as w}from"./vendor-react-gM1mPWB3.js";import{c as m}from"./vendor--radix-ui-primitive-Dc_FVRD7.js";import{P as R,d as j}from"./vendor--radix-ui-react-primitive-BKAPG_6T.js";import{u as g}from"./vendor--radix-ui-react-compose-refs-DBaD7hpW.js";import{u as x}from"./vendor--radix-ui-react-use-callback-ref-BdE_WETI.js";import{u as z}from"./vendor--radix-ui-react-use-escape-keydown-BcpsJOaM.js";var H="DismissableLayer",p="dismissableLayer.update",M="dismissableLayer.pointerDownOutside",K="dismissableLayer.focusOutside",C,B=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),T=s.forwardRef((n,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:u,onInteractOutside:f,onDismiss:d,...E}=n,o=s.useContext(B),[c,S]=s.useState(null),l=c?.ownerDocument??globalThis?.document,[,W]=s.useState({}),A=g(e,t=>S(t)),y=Array.from(o.layers),[N]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(N),b=c?y.indexOf(c):-1,k=o.layersWithOutsidePointerEventsDisabled.size>0,D=b>=_,U=Y(t=>{const v=t.target,O=[...o.branches].some(h=>h.contains(v));!D||O||(i?.(t),f?.(t),t.defaultPrevented||d?.())},l),P=q(t=>{const v=t.target;[...o.branches].some(h=>h.contains(v))||(u?.(t),f?.(t),t.defaultPrevented||d?.())},l);return z(t=>{b===o.layers.size-1&&(a?.(t),!t.defaultPrevented&&d&&(t.preventDefault(),d()))},l),s.useEffect(()=>{if(c)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(C=l.body.style.pointerEvents,l.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(c)),o.layers.add(c),L(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(l.body.style.pointerEvents=C)}},[c,l,r,o]),s.useEffect(()=>()=>{c&&(o.layers.delete(c),o.layersWithOutsidePointerEventsDisabled.delete(c),L())},[c,o]),s.useEffect(()=>{const t=()=>W({});return document.addEventListener(p,t),()=>document.removeEventListener(p,t)},[]),w.jsx(R.div,{...E,ref:A,style:{pointerEvents:k?D?"auto":"none":void 0,...n.style},onFocusCapture:m(n.onFocusCapture,P.onFocusCapture),onBlurCapture:m(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:m(n.onPointerDownCapture,U.onPointerDownCapture)})});T.displayName=H;var X="DismissableLayerBranch",F=s.forwardRef((n,e)=>{const r=s.useContext(B),a=s.useRef(null),i=g(e,a);return s.useEffect(()=>{const u=a.current;if(u)return r.branches.add(u),()=>{r.branches.delete(u)}},[r.branches]),w.jsx(R.div,{...n,ref:i})});F.displayName=X;function Y(n,e=globalThis?.document){const r=x(n),a=s.useRef(!1),i=s.useRef(()=>{});return s.useEffect(()=>{const u=d=>{if(d.target&&!a.current){let E=function(){I(M,r,o,{discrete:!0})};const o={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=E,e.addEventListener("click",i.current,{once:!0})):E()}else e.removeEventListener("click",i.current);a.current=!1},f=window.setTimeout(()=>{e.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(f),e.removeEventListener("pointerdown",u),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>a.current=!0}}function q(n,e=globalThis?.document){const r=x(n),a=s.useRef(!1);return s.useEffect(()=>{const i=u=>{u.target&&!a.current&&I(K,r,{originalEvent:u},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function L(){const n=new CustomEvent(p);document.dispatchEvent(n)}function I(n,e,r,{discrete:a}){const i=r.originalEvent.target,u=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(n,e,{once:!0}),a?j(i,u):i.dispatchEvent(u)}var ee=T,te=F;export{te as B,T as D,ee as R};
